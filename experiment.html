<html>
    <head>
        <title>Monte Carlo Experiments</title>
    </head>
    <body>
        <script src="simulation.js"></script>
        <script>

            let simulation = new Simulation()
                .setParameters(() => ({
                    hits: 0
                }))

                .setExperiment((params, { random }) => {
                    let [ x, y ] = random(2)();
                    params.hits += Math.sqrt(x * x + y * y) < 1;
                })

                .setAggregate(({ hits }, { iterations }) => {
                    let pi = hits / iterations * 4,
                        tuple = [Math.PI, pi],
                        [ max, min ] = [Math.max(...tuple), Math.min(...tuple)];
                    console.log(`${ (max / min * 100).toFixed(2) }%, estimated value of PI ${ pi }`);
                })
                
                .setIterations(30000)
                .runWhile((_, { experimentCount }) => experimentCount < 10);

        </script>
    </body>
</html>